var S=Object.defineProperty;var O=(t,e,n)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var l=(t,e,n)=>(O(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();let L=class{constructor(){l(this,"contexts");this.contexts=[]}currentContext(){return this.contexts[this.contexts.length-1]}addContext(e){this.contexts.push(e)}popContext(){return this.contexts.pop()}getContext(){return this.contexts}};const w=new L,p=()=>w.currentContext(),T=t=>{const e=p();e&&e.own(t)};class N{constructor(){l(this,"owned");l(this,"disposeEvents");this.owned=[],this.disposeEvents=[]}own(e){this.owned.push(e)}dispose(){this.disposeEvents.forEach(e=>e()),this.disposeEvents=[],this.owned=[]}onDispose(e){this.disposeEvents.push(e);const n=this.disposeEvents.length-1;return s=>{this.disposeEvents.length>n&&(this.disposeEvents[n]=s)}}addEffect(e){this.owned.forEach(n=>n.addEffect(e))}removeEffect(e){this.owned.forEach(n=>n.removeEffect(e))}getOwned(){return this.owned}}let P=class{constructor(e){l(this,"effects");l(this,"value");this.value=e,this.effects=[]}_read(){return this.value}read(){return T(this),this._read()}_write(e){this.value=e}write(e){this._write(e),this.effects.forEach(n=>n())}dispose(){this.effects=[]}addEffect(e){this.effects.push(e)}removeEffect(e){this.effects=this.effects.filter(n=>n!==e)}};const E=t=>{const e=new N;return w.addContext(e),t(),w.popContext(),p()&&h(()=>_(e)),()=>_(e)},_=t=>{t.dispose()},h=t=>{const e=p();if(e)return e.onDispose(t)},D=t=>{const e=new P(t);return[()=>e.read(),n=>e.write(typeof n=="function"?n(e._read()):n)]},I=t=>{const e=E(()=>{t();const n=p();n&&(n.addEffect(t),h(()=>{n.removeEffect(t)}))});h(e)},W=t=>{const[e,n]=D(null);let s=null,r;const o=()=>{s&&s();const c=E(()=>{n(t());const i=p();i&&(i.addEffect(o),h(()=>{i.removeEffect(o)}))});s=c,r==null||r(c)};return o(),r=h(s),e},x=(t,e)=>{const n=v(e);Array.isArray(n)?n.forEach(s=>t.appendChild(s)):t.appendChild(n)},H=(t,e=document.body)=>{E(()=>{x(e,t)})},v=t=>t instanceof Node?t:Array.isArray(t)?t.map(e=>v(e)):new Text(t+""),B=(t,e)=>{const n=v(e);if(Array.isArray(n)){let s=t;n.forEach(r=>{s.after(r),s=r})}else t.after(n)},y=(t,e)=>{const n=v(e);if(Array.isArray(n)){let s=t;n.reverse().forEach(r=>{s.before(r),s=r})}else t.before(n)},G=(t,e,n)=>{if(Array.isArray(t))if(Array.isArray(e)){if(t.length===0&&n){y(n,e);return}for(;t.length>e.length;)t[t.length-1].remove(),t.pop();let s=0;for(;s<t.length;s++)t[s].replaceWith(e[s]);for(;s<e.length;)e[s-1].after(e[s]),s++}else{if(t.length===0&&n){y(n,e);return}for(;t.length>1;)t[t.length-1].remove(),t.pop();t[0].replaceWith(e)}else if(Array.isArray(e)){if(e.length===0){t.remove();return}const s=e.shift();t.replaceWith(s),B(s,e)}else t.replaceWith(e)},K=t=>{const e=`$$${t.type}`;let n=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==n&&Object.defineProperty(t,"target",{configurable:!0,value:n}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return n||document}});n;){const s=n[e];if(s&&!n.disabled){const r=n[`${e}Data`];r!==void 0?s(r,t):s(t)}n=n.parentNode}},g="_$DX_DELEGATE",$=(t,e)=>{let n;return E(()=>{n=t(e)}),n},m=(t,e,n)=>{const r=(()=>{const o=document.createElement("template");return o.innerHTML=t,n?o.content.firstChild.firstChild:o.content.firstChild})();return()=>r==null?void 0:r.cloneNode(!0)},f=(t,e,n,s)=>{if(s&&console.log("HAS INITIAL",{parent:t,accessor:e,marker:n,initial:s}),typeof e=="function"){let r=null;I(()=>{const o=e();if(o===!1){r!==null&&(r.remove(),r=null);return}const c=v(o);r===null?n!==null?y(n,c):x(t,c):G(r,c,n),r=c})}else x(t,e)},b=(t,e=document)=>{const n=e[g]||(e[g]=new Set);for(let s=0;s<t.length;s++){const r=t[s];n.has(r)||(n.add(r),e.addEventListener(r,K))}};class M{constructor(){l(this,"contexts");this.contexts=[]}currentContext(){return this.contexts[this.contexts.length-1]}addContext(e){this.contexts.push(e)}popContext(){return this.contexts.pop()}getContext(){return this.contexts}}const V=new M,k=()=>V.currentContext(),q=t=>{const e=k();e&&e.own(t)};class F{constructor(e){l(this,"effects");l(this,"value");this.value=e,this.effects=[]}_read(){return this.value}read(){return q(this),this._read()}_write(e){this.value=e}write(e){this._write(e),this.effects.forEach(n=>n())}dispose(){this.effects=[]}addEffect(e){this.effects.push(e)}removeEffect(e){this.effects=this.effects.filter(n=>n!==e)}}const C=t=>{const e=new F(t);return[()=>e.read(),n=>e.write(typeof n=="function"?n(e._read()):n)]};var R=m("<span>in another component");const X=()=>R();var j=m("<div><button>Add</button><button>Remove</button><span>---</span><span>---"),z=m("<span>");const J=()=>{const[t,e]=C([1,2,3,4]),n=()=>{e(r=>[...r,(r[r.length-1]||0)+1])},s=()=>{e(r=>(r.pop(),[...r]))};return(()=>{var r=j(),o=r.firstChild,c=o.nextSibling,i=c.nextSibling,a=i.nextSibling;return o.$$click=n,c.$$click=s,f(r,()=>t().map(u=>(()=>{var d=z();return f(d,u),d})()),a),f(r,()=>t().length===0&&"array empty",null),r})()};b(["click"]);var Q=m("<div><span>here</span><button>test </button><button>click me");const U=t=>{const[e,n]=C(0),[s,r]=C(!1),o=i=>{console.log("CLICKING",i.currentTarget),n(a=>a+1)},c=()=>{r(i=>!i)};return(()=>{var i=Q(),a=i.firstChild,u=a.nextSibling;u.firstChild;var d=u.nextSibling;return u.$$click=o,f(u,e,null),f(i,(()=>{var A=W(()=>!!(s()&&e()===0));return()=>A()?$(X,{}):"epic"})(),d),d.$$click=c,f(i,$(J,{}),null),i})()};b(["click"]);var Y=m("<div>");const Z=()=>(()=>{var t=Y();return f(t,$(U,{property:"what",children:"sdlkfjsdl"})),t})();H($(Z,{}));
